<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Setup GitHub</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="card">
    <h2>ğŸ” Setup GitHub</h2>

    <input id="token" placeholder="GitHub Token">
    <input id="repo" placeholder="user/repo">
    <input id="file" placeholder="number.json">
    <input id="raw" placeholder="Raw GitHub URL">

    <button onclick="saveConfig()">Lanjut</button>
  </div>

  <!-- Cookie Popup -->
  <div id="cookie" class="cookie hidden">
    <p>Simpan data agar tidak perlu input ulang?</p>
    <button onclick="acceptCookie()">Accept</button>
    <button onclick="rejectCookie()">Reject</button>
  </div>

  <script>
  if (localStorage.getItem('save') === 'true') {
  if (location.pathname.includes('index.html')) {
    location.href = 'dashboard.html';
  }
}

// SAVE CONFIG
function saveConfig() {
  window.tempConfig = {
    token: token.value,
    repo: repo.value,
    file: file.value,
    raw: raw.value
  };
  document.getElementById('cookie').classList.remove('hidden');
}

function acceptCookie() {
  Object.entries(window.tempConfig).forEach(([k,v])=>{
    localStorage.setItem(k, v);
  });
  localStorage.setItem('save','true');
  location.href = 'dashboard.html';
}

function rejectCookie() {
  Object.entries(window.tempConfig).forEach(([k,v])=>{
    sessionStorage.setItem(k, v);
  });
  location.href = 'dashboard.html';
}
  </script>
</body>
</html>